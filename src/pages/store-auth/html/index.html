<html>
<meta charset="UTF-8">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport" />

<head>
    <link rel="stylesheet" type="text/css" href="./css/index.css" />
</head>

<body>
    <div class="from">
        <div class="fromItem" style="height:120px">
            <label>营业执照:</label>
            <input type="file" id="StoreCodeImg" style="display:none">
            <label for="StoreCodeImg">
                <img src="./img/u18.png" style="height: 73px;" id="StoreCodeImg-img">
                <br>
                <span>营业执照</span>
            </label>

        </div>
        <div class="line"></div>
        <div class="fromItem" style="height:120px">
            <label>身份证：</label>
            <input type="file" id="LegCodeImgA" style="display:none">
            <label for="LegCodeImgA">
                <img src="./img/u18.png" style="height: 73px;" id="LegCodeImgA-img">
                <br>
                <span>正面</span>
            </label>
            <input type="file" id="LegCodeImgB" style="display:none">
            <label for="LegCodeImgB">
                <img src="./img/u18.png" style="height: 73px;" id="LegCodeImgB-img">
                <br>
                <span>反面</span>
            </label>

        </div>

        <div class="line"></div>


        <div class="fromItem" style="height:120px">
            <label>合约上传:</label>
            <input type="file" id="ContractImg" style="display:none">
            <label for="ContractImg">
                <img src="./img/u18.png" style="height: 73px;" id="ContractImg-img">
                <br>
                <span>合约</span>
            </label>

        </div>
    </div>
    <div id="save">保存</div>
    <script src="./js/jq.js"></script>
    <script>
        function GetRequest() {
            var url = location.search; //获取url中"?"符后的字串
            var theRequest = new Object();
            if (url.indexOf("?") != -1) {
                var str = url.substr(1);
                strs = str.split("&");
                for (var i = 0; i < strs.length; i++) {
                    theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
                }
            }
            return theRequest;
        };
        //var params = JSON.parse(GetRequest().params);
        var params={
            AdminId:2,
            StoreId:25,
            url:'http://101.200.196.202:8888/Store/EditStore'
        };
        var base = 'data:image/png;base64,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'
        var imgBase64 = {
            StoreCodeImg: base,
            LegCodeImgA: base,
            LegCodeImgB: base,
            ContractImg: base,
        };
        var imgDomInfo = [$('#StoreCodeImg'), $('#LegCodeImgA'), $('#LegCodeImgB'), $('#ContractImg')];
        imgDomInfo.forEach(function ($imgDom) {
            $imgDom.change(function (e) {
                var file = $imgDom[0].files[0]
                var reader = new FileReader(file);
                reader.readAsDataURL(file);
                reader.onload = function (e) {
                    $('#' + $imgDom[0].id + '-img').attr("src", e.target.result);
                    imgBase64[$imgDom[0].id] = e.target.result;
                };
            });
        })

        var $save = $('#save');
        //alert( `${params.url}-${params.AdminId}-${params.StoreId}`);
        $save.on('click',function () {
            console.log(Object.assign(imgBase64, {AdminId: params.AdminId,StoreId:params.StoreId}))
            $.ajax({
                url: params.url,
                type: 'post',
                dataType:'json',
                data: Object.assign(imgBase64, {AdminId: params.AdminId,StoreId:params.StoreId}),
                success:function(res){
                    alert('成功')
                },
                error:function(e){
                    alert(JSON.stringify(e))
                }
            })
        })

    </script>
</body>

</html>